<div class="modal fade" id="new_book_modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-header p-2">
        <h5 class="modal-title">Nuevo Libro</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body my-3">
        <form class="row g-3">

          <div class="input-group mb-2">
            <label for="new_book_title" class="input-group-text">Título</label>
            <input id="new_book_title" type="text" name="new_book_title" class="form-control" required="required">
          </div>

          <div class="input-group">
            <div class="form-check">
              <input id="new_book_author_known" class="form-check-input" type="radio" name="new_book_author">
              <label for="new_book_author_known" class="form-check-label">
                Autor conocido
              </label>
            </div>
            <div class="form-check">
              <input id="new_book_author_anonymous" class="form-check-input" type="radio" name="new_book_author">
              <label for="new_book_author_anonymous" class="form-check-label">
                Autor anónimo
              </label>
            </div>
            <div class="form-check">
              <input id="new_book_author_multiple" class="form-check-input" type="radio" name="new_book_author">
              <label for="new_book_author_multiple" class="form-check-label">
                Varios autores
              </label>
            </div>
          </div>

          <div class="input-group mb-2">
            <label for="new_book_author_name" class="input-group-text">Nombre del Autor</label>
            <input id="new_book_author_name" type="text" name="new_book_author_name" class="form-control" required="required">
          </div>

          <div class="input-group mb-4">
            <label for="new_book_location" class="input-group-text">Sede de depósito</label>
            <select id="new_book_location" name="new_book_location" class="form-select" required="required">
              <% locations.forEach(function (location,i) { %>
                <option <% if (i==0) { %> selected <% }%> value="<%=location.id%>"><%= location.name%></option>
              <% }) %>
            </select>
          </div>

          <div class="input-group mb-2">
            <label for="new_book_category" class="input-group-text">Género</label>
            <select id="new_book_category" name="new_book_category" class="form-select" required="required">
              <% categories.forEach(function (e,i) { %>
                <option value="<%= e.id%>"><%= e.name%></option>
              <% }) %>
            </select>
          </div>

          <% categories.forEach(function (e,i) { %>
            <div class="input-group mb-2">
              <label for="new_book_subcategory" class="input-group-text"><%= e.name%></label>
              <select id="new_book_subcategory" name="new_book_subcategory" class="form-select" required="required">
                <%
                  var filteredSubcategories = subcategories.filter(function (subcategory,i) {
                    return (subcategory.parent == e.id)
                  })
                %>
                <% filteredSubcategories.forEach(function (subcategory,i) { %>
                  <option <% if (i==0) { %> selected <% }%> value="1"><%= subcategory.name%></option>
                <% }) %>
              </select>
            </div>
          <% }) %>

          <div class="input-group">
            <label for="new_book_language" class="input-group-text">Idioma</label>
            <select id="new_book_language" name="new_book_language" class="form-select" required="required">
              <% languages.forEach(function (language,i) { %>
                <option <% if (i==0) { %> selected <% }%> value="1"><%= language.name%></option>
              <% }) %>
            </select>
            <label for="new_book_isbn" class="input-group-text">ISBN</label>
            <input id="new_book_isbn" type="text" name="new_book_isbn" class="form-control" required="required">
          </div>

          <div class="input-group">
            <label for="new_book_editorial" class="input-group-text">Editorial</label>
            <input id="new_book_editorial" type="text" name="new_book_editorial" class="form-control" required="required">
          </div>

          <div class="input-group">
            <label for="new_book_format" class="input-group-text">Formato</label>
            <input id="new_book_format" type="text" name="new_book_format" class="form-control">
          </div>

          <div class="input-group">
            <label for="new_book_dimensions" class="input-group-text">Dimensiones</label>
            <input id="new_book_dimensions_length" type="number" class="form-control" required="required" placeholder="Alto">
            <span class="input-group-text">x</span>
            <input id="new_book_dimensions_width" type="number" class="form-control" required="required" placeholder="Ancho">
            <span class="input-group-text">Cms</span>
          </div>

          <div class="input-group mb-4">
            <label for="new_book_publish_date" class="input-group-text">Fecha</label>
            <input id="new_book_publish_date" type="number" class="form-control" required="required">
            <label for="new_book_issue" class="input-group-text">Edición</label>
            <input id="new_book_issue" type="number" class="form-control" required="required">
            <label for="new_book_pages" class="input-group-text">Páginas</label>
            <input id="new_book_pages" type="number" class="form-control" required="required">
          </div>

          <div class="input-group mb-2">
            <label for="new_book_synopsis" class="input-group-text">Sinopsis</label>
            <textarea id="new_book_synopsis"
                class="form-control"
                required="required"
                name="new_book_synopsis"
                rows="4"
                placeholder="Trata de no superar los 500 caracteres; y haz referencia al libro, no al ejemplar concreto."></textarea>
          </div>

          <div class="input-group mb-4">
            <label for="new_book_pic" class="input-group-text">Imagen del Libro</label>
            <input id="new_book_pic" type="text" name="new_book_pic" class="form-control" required="required">
          </div>

        </form>
      </div>

      <div class="modal-footer p-1">
        <button id="new_book_create_button" type="button" class="btn btn-primary" name="new_book_create_button">
          Crear Libro
        </button>
      </div>

    </div>
  </div>
</div>

<script type="text/javascript" src="/public/js/partials/modals/new-book-modal.js"></script>
