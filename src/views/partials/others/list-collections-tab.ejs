<div class="row g-0">
  <button type="button" class="btn btn-success fw-bold"
    data-bs-toggle="modal" data-bs-target="#new_collection_modal">
    Añadir Nueva <i class="fa-solid fa-plus"></i>
  </button>
</div>

<!-- Mis Colecciones-->
<div class="row g-0">
  <div id="collections_accordion" class="accordion">
    <% member.collections.forEach(function (collection, i) { %>
    <div class="accordion-item">

      <div class="accordion-header">
        <div class="list-group-item d-flex justify-content-between">
          <button class="accordion-button collapsed" type="button"
            data-bs-toggle="collapse" data-bs-target="#accordionCollapser<%= i%>"
            aria-expanded="false" aria-controls="accordionCollapser<%= i%>">
            <%= collection.name %>
            <div class="badge bg-success rounded-pill ms-3">
              <%= collection.books.length %>
            </div>
          </button>
          <!-- Vínculo a la collection-edit correspondiente -->
          <a href="<%= member.id%>/<%= collection.id%>">
            <button type="button" class="btn btn-success">
              <i class="fa-solid fa-file-signature"></i>
            </button>
          </a>
        </div>
      </div>

      <div id="accordionCollapser<%= i%>" class="accordion-collapse collapse">
        <div class="accordion-body">
          <% collection.books.forEach(function (book) { %>
            <div class="list-group-item d-flex justify-content-between">
              <a href="/books/<%=book.id%>" class="text-black text-decoration-none">
                <i id="<%=book.id%>_reviewed_star" class="book-reviewed-star fa-solid fa-star"></i>
                <span><strong><%=book.title %></strong> (<%=book.author.name %>)</span>
              </a>
              <button id="out_of_collection_<%=book.id%>_button" type="button"
                class="out-of-collection-button btn btn-sm btn-outline-success"
                data-bs-toggle="modal" data-bs-target="#out_of_collection_modal">
                <i class="fa-solid fa-square-xmark"></i>
              </button>
            </div>
          <% }); %>
        </div>
      </div>

    </div>
    <% }); %>

    <!-- Libros sin Colección-->
    <div class="accordion-item">
      <div class="accordion-header">
        <button class="accordion-button collapsed" type="button"
          data-bs-toggle="collapse" data-bs-target="#accordionOtherCollapser"
          aria-expanded="false" aria-controls="accordionOtherCollapser">
          Libros sin Colección
          <div class="badge bg-success rounded-pill ms-3"><%= orphanBooks.length %></div>
        </button>
      </div>

      <div id="accordionOtherCollapser" class="accordion-collapse collapse">
        <div class="accordion-body">
          <% orphanBooks.forEach(function (e) { %>
            <div class="list-group-item list-group-item-action d-flex justify-content-between">
              <a href="/books/<%=e.id%>" class="text-black text-decoration-none">
                <i id="<%=e.id%>_reviewed_star" class="book-reviewed-star fa-solid fa-star"></i>
                <span><strong><%=e.title%></strong> (<%=e.author.name%>)</span>
              </a>
              <button id="out_of_orphans_<%=e.id%>_button" type="button"
                  class="out-of-orphans-button btn btn-success"
                  data-bs-toggle="modal" data-bs-target="#out_of_orphans_modal">
                <i class="fa-solid fa-file-signature"></i>
              </button>
            </div>
          <% }); %>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- Zona para Modals-->
<%- include('../modals/new-collection-modal.ejs', {}); %>
<%- include('../modals/out-of-collection-modal.ejs', {}); %>
<%- include('../modals/out-of-orphans-modal.ejs', {}); %>
