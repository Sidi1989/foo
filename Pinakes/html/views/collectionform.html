<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Pinakes - <%=user.nickname%> - New Collection</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <link rel="stylesheet" href="/public/css/main.css">
    <link rel="stylesheet" href="/public/css/collectionform.css">
  </head>


  <body>
    <div class="container">
      <!-- Header-->
      <%- include('../partials/header.html', {}); %>

      <form class="row g-3">

        <!-- Registro básico -->
        <div class="bg-success p-1 text-white">
          <h5>Registro de Colección</h5>
        </div>

        <div class="input-group mb-3">
          <label class="input-group-text" for="collectionName">Nombre de la Colección</label>
          <input id="collectionName" type="text" class="form-control">
        </div>

        <div class="mb-4">
          <label for="collectionPicFile" class="form-label">
            <h6><u>Imagen para la Colección</u></h6>
          </label>
          <input id="collectionPicFile" class="form-control" type="file" multiple>
        </div>

        <!-- Libros desde Colecciones anteriores -->
        <div class="container-fluid mb-4">
          <div class="card">
            <div class="card-header bg-success text-white text-center">
              <h5>id: collectionName</h5>
            </div>

            <div class="card-body">
              <div class="container-fluid">
                <div class="card mb-3">
                  <div class="card-body" id="chosenBooksTable">
                    Cuadro al que se arrastan los libros para crear la nueva Colección
                  </div>
                </div>
              </div>

              <div class="container-fluid">
                <div class="card">
                  <div class="card-header bg-success text-white text-center">
                    <h7>¿Quieres mover alguno de tus libros a la Nueva Colección?</h7>
                  </div>

                  <div class="card-body">
                    <div class="row">
                      <div class="col">
                        <div class="card">
                          <div class="card-header text-center">
                            <h6>Libros sin Colección</h6>
                          </div>
                          <div class="card-body">
                            <div class="row row-cols-3">
                              <div class="col">
                                <img class="card-img-top" src="#" alt="Imagen de un libro">
                              </div>
                              <div class="col">
                                <img class="card-img-top" src="#" alt="Imagen de un libro">
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                      <% collections.forEach(function (collection,i){ %>
                      <div class="col">
                        <div class="card">
                          <div class="card-header text-center">
                            <h6><%= collection.name%></h6>
                          </div>
                          <div class="card-body">
                            <div class="row row-cols-3">
                              <% collection.books.forEach(function (book,i){ %>
                              <div id="booksToMove" class="col">
                                <img class="card-img-top" src="<%= book.pic.main%>">
                              </div>
                              <% }) %>
                            </div>
                          </div>
                        </div>
                      </div>
                      <% }) %>
                    </div>

                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>

        <!-- Botón de submit -->
        <div class="d-grid col-4 mx-auto p-0 border border-secondary border-4">
          <button id="createNewCollection" type="submit" class="btn btn-success">
            <h5>Crear la Colección</h5>
          </button>
        </div>
      </form>

      <!-- Footer-->
      <%- include('../partials/footer.html', {}); %>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script type="text/javascript" src="/public/js/collectionform.js"></script>

  </body>
</html>
